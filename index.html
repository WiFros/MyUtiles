<!DOCTYPE html>
<html>
<head>
    <title>Travel Expense Splitter</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.1.0/papaparse.min.js"></script>
    <style>
        #data {
            width: 100%;
            height: 200px;
        }
    </style>
</head>
<body>
    <h1>Travel Expense Splitter</h1>
    <p>Paste your data in the format:</p>
    <pre>
        이름,사용한 금액
        철수,730000
        영희,45000
        짱구,95000
        ...
        참여자,이름
        ...
    </pre>
    <textarea id="data" placeholder="Paste your data here"></textarea>
    <button onclick="handlePaste()">Parse Data</button>
    <pre id="output"></pre>
    <script>
        function handlePaste() {
            var data = document.getElementById('data').value;
            var results = Papa.parse(data);
            var splitResults = splitExpenses(results.data);
            document.getElementById('output').textContent = JSON.stringify(splitResults, null, 2);
        }

        function splitExpenses(data) {
            // Your expense splitting logic here
            // This is a placeholder and must be replaced with your own logic
            var total = 0;
            var count = 0;
            var expenses = {};
            var participants = [];
            data.forEach(function(row) {
                if (row[1]) {
                    var name = row[0];
                    var amount = parseInt(row[1]);
                    total += amount;
                    count += 1;
                    expenses[name] = (expenses[name] || 0) + amount;
                } else {
                    participants.push(row[0]);
                }
            });
            var average = total / count;
            var splits = {};
            Object.keys(expenses).forEach(function(name) {
                splits[name] = expenses[name] - average;
            });
            participants.forEach(function(name) {
                splits[name] = splits[name] || -average;
            });
            return splits;
        }
    </script>
</body>
</html>
